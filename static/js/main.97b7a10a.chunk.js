(this["webpackJsonpcurrency-converter-pwa"]=this["webpackJsonpcurrency-converter-pwa"]||[]).push([[0],{367:function(e,t,n){},432:function(e,t,n){"use strict";n.r(t);var r=n(15),a=n(0),c=n.n(a),i=n(16),s=n.n(i),o=(n(367),n(110)),u=n(473),l=n(472),f=n(117),d=n(307),p=n(308),b=n(115);function h(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"dark":"light",n=e?f.a[900]:d.a[900],r=e?"#616161":p.a[500];return Object(b.a)({palette:{type:t,primary:{main:n},secondary:{main:r}}})}var j=n(309),v=n(460),O=n(466),g=n(315),y=n(96),w=n(241),x=n(470),m=n(467),E=n(469),k=n(328),C=n(20),S=n.n(C),T=n(38),I=n(91),R=n.n(I),N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(e){if("serviceWorker"in navigator){if(new URL("/currency-converter-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/currency-converter-pwa","/service-worker.js");N?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):_(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):_(t,e)}))}}function _(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var A=n(353),G=n(58),U=n(456),L=n(310),W=Object(j.a)((function(e){return{root:{flexGrow:1},currencyText:{display:"flex",flexDirection:"column",justifyContent:"center"},currencyInput:{width:"100%"}}}));var F=function(e){var t=e.currency,n=e.change,a=W();return Object(r.jsxs)(U.a,{container:!0,spacing:3,children:[Object(r.jsx)(U.a,{className:a.currencyText,item:!0,sm:3,children:Object(r.jsxs)(y.a,{variant:"body1",children:[t.name," (",t.id,")"]})}),Object(r.jsx)(U.a,{item:!0,sm:9,children:Object(r.jsx)(L.a,{id:"outlined-number",className:a.currencyInput,label:"Number",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:t.rates,onChange:function(e){n(t.id,e.target.value)}})})]})},M=n(109),P=n(348),B=n(349),z=n(458),H=n.n(z),J=[{id:"EUR",name:"Euro",rates:"1.00"},{id:"GBP",name:"British Pound Sterling",rates:"0.1"},{id:"USD",name:"United States Dollar",rates:"1.17"}],V=new(function(){function e(){Object(P.a)(this,e)}return Object(B.a)(e,[{key:"updateRates",value:function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,n=null,e.prev=2,e.next=5,this.getAllRates();case 5:return t=e.sent,e.next=8,this.getCurrencyList();case 8:n=(n=e.sent).symbols,e.next=18;break;case 12:return e.prev=12,e.t0=e.catch(2),console.log(e.t0),e.next=17,this.getOfflineData();case 17:return e.abrupt("return",e.sent);case 18:return e.next=20,this.populate(n,t);case 20:return r=e.sent,e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrencyList",value:function(){var e=Object(T.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("//jiasheng.tech/api","/currencylist/"),e.next=3,fetch(t);case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllRates",value:function(){var e=Object(T.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("//jiasheng.tech/api","/rates/"),e.next=3,fetch(t);case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOfflineData",value:function(){var e=Object(T.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.getItem("data");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSelectedCurrencies",value:function(){var e=Object(T.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,R.a.getItem("selectedCurrencies");case 3:if(r=e.sent){e.next=8;break}return e.next=7,R.a.setItem("selectedCurrencies",J);case 7:r=e.sent;case 8:if(!t){e.next=11;break}return Object.entries(t).forEach((function(e){var t,a=Object(M.a)(r);try{for(a.s();!(t=a.n()).done;){var c=t.value;e[1].id===c.id&&n.push(e[1])}}catch(i){a.e(i)}finally{a.f()}})),e.abrupt("return",n);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSelectedCurrencies",value:function(){var e=Object(T.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.setItem("selectedCurrencies",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"populate",value:function(){var e=Object(T.a)(S.a.mark((function e(t,n){var r,a,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in r=[],t)(c={}).id=a,c.name=t[a],c.rates=n.rates[a].toFixed(2)||0,r.push(c);return e.next=4,R.a.setItem("data",r);case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDate",value:function(e){var t=new Date(1e3*e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(("0"+t.getMinutes()).slice(-2))}},{key:"change",value:function(e,t,n,r){var a,c={},i=Object(M.a)(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;c[s.id]=Number(s.rates)}}catch(p){i.e(p)}finally{i.f()}var o,u=[],l=Object(M.a)(t);try{for(l.s();!(o=l.n()).done;){var f=o.value,d={};d.name=f.name,d.id=f.id;try{d.rates=H()(Number(r),{from:n,to:f.id,base:"EUR",rates:c}),d.id===n?d.rates=r:d.rates=d.rates.toFixed(2)}catch(b){console.log(b)}u.push(d)}}catch(p){l.e(p)}finally{l.f()}return u}}]),e}());Object.freeze(V);var K=V,Y="GET_CURRENCIES",$="GET_CURRENCIES_SUCCESS",q="GET_CURRENCIES_FAILURE",Q="GET_SELECTED_CURRENCIES",X="SET_SELECTED_CURRENCIES",Z="CHANGE_RATE",ee="GET_TABLE_DATA",te=function(e){return{type:$,payload:e}};var ne=Object(j.a)((function(e){return{root:{flexGrow:1,margin:24}}}));var re=Object(G.b)((function(e){return{selected:e.currencies.selectedCurrencies,rates:e.currencies.currencies}}))((function(e){var t=e.dispatch,n=e.selected,c=e.rates,i=ne();Object(a.useEffect)((function(){t(function(e){return function(){var t=Object(T.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.getSelectedCurrencies(e);case 2:r=t.sent,n({type:Q,payload:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(c))}),[t,c]);var s=function(e,r){if(!isNaN(r)){var a=Object(A.a)(n);t(function(e,t,n,r){return function(){var a=Object(T.a)(S.a.mark((function a(c){var i;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=K.change(e,t,n,r),c({type:Z,payload:i});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(c,a,e,r))}};return Object(r.jsx)("div",{className:i.root,children:function(){if("object"===typeof n&&0!==n.length)return n.map((function(e){return Object(r.jsx)(F,{currency:e,change:s},e.id)}))}()})})),ae=n(240),ce=n.n(ae),ie=Object(j.a)((function(e){return{root:{flexGrow:1,margin:24,maxWidth:"100%"}}}));var se=Object(G.b)((function(e){return{tableData:e.currencies.tableData,rates:e.currencies.currencies}}))((function(e){var t=e.dispatch,n=e.tableData,c=e.rates,i=ie();return Object(a.useEffect)((function(){t(function(e){return function(){var t=Object(T.a)(S.a.mark((function t(n){var r,a,c,i,s,o,u;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.getSelectedCurrencies(e);case 2:r=t.sent,a=Object(M.a)(e);try{for(a.s();!(c=a.n()).done;){i=c.value,s=Object(M.a)(r);try{for(s.s();!(o=s.n()).done;)u=o.value,i.id===u.id&&(i.tableData={checked:!0})}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}n({type:ee,payload:e});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(c))}),[t,c]),Object(r.jsx)("div",{className:i.root,children:Object(r.jsx)(ce.a,{columns:[{title:"Name",field:"name"},{title:"ID",field:"id"},{title:"Rate",field:"rates",type:"numeric"}],data:n,title:"",options:{sorting:!0,selection:!0,pageSize:20},onSelectionChange:function(e){return t((n=e,function(){var e=Object(T.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.setSelectedCurrencies(n);case 2:t({type:X,payload:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n}})})})),oe=function(e){return{type:"SET_VIEW",view:e}},ue="HOME",le="ALL",fe="STATS",de=n(468),pe=n(471),be=n(209),he=n(29),je=Object(j.a)((function(e){return{root:{flexGrow:1},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}));var ve=Object(G.b)((function(e){return{view:e.views.view}}))((function(e){var t=e.dispatch,n=e.view,a=je();return Object(r.jsxs)(be.a,{children:[Object(r.jsxs)(he.d,{children:[Object(r.jsx)(he.b,{path:"/all",render:function(){return t(oe(le)),Object(r.jsx)(se,{})}}),Object(r.jsx)(he.b,{path:"/",render:function(){return t(oe(ue)),Object(r.jsx)(re,{})}}),Object(r.jsx)(he.a,{to:"/"})]}),function(e){switch(e){case ue:return Object(r.jsx)(de.a,{component:be.b,to:"/all",color:"primary",className:a.fab,children:Object(r.jsx)(pe.a,{})});case le:return Object(r.jsx)(de.a,{component:be.b,to:"/",color:"primary",className:a.fab,children:Object(r.jsx)(l.a,{})});case fe:default:return null}}(n)]})})),Oe=Object(j.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},fab:{position:"relative",bottom:e.spacing(2),right:e.spacing(2)}}}));var ge=Object(G.b)((function(e){return{loading:e.currencies.loading,rates:e.currencies.currencies,hasErrors:e.currencies.hasErrors,view:e.views.view}}))((function(e){var t=e.dispatch,n=e.loading,c=e.rates,i=e.hasErrors,s=(e.view,Oe()),f=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){return(e=Object(T.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.getItem("darkMode");case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),[n,function(){R.a.setItem("darkMode",!n),r(!n)}]}(),d=Object(o.a)(f,2),p=d[0],b=d[1],j=Object(a.useState)(!1),C=Object(o.a)(j,2),I=C[0],N=C[1],_=Object(a.useState)({}),A=Object(o.a)(_,2),G=A[0],U=A[1],L=Object(a.useState)(!1),W=Object(o.a)(L,2),F=W[0],M=W[1],P=function(e,t){"clickaway"!==t&&M(!1)};Object(a.useEffect)((function(){t(function(){var e=Object(T.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Y}),e.prev=1,e.next=4,K.getOfflineData();case 4:return n=e.sent,t(te(n)),e.next=8,K.updateRates();case 8:r=e.sent,t(te(r)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t({type:q});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()),D({onUpdate:B}),I&&M(!0)}),[t,I]);var B=function(e){N(!0),U(e&&e.waiting)};return Object(r.jsx)(v.a,{theme:h(p),children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(O.a,{position:"static",children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(y.a,{variant:"h6",className:s.title,children:"Currency Conveter"}),Object(r.jsx)(w.a,{color:"inherit","aria-label":"statistics",children:Object(r.jsx)(u.a,{})}),Object(r.jsx)(x.a,{checked:p||!1,onChange:b})]})}),Object(r.jsx)(m.a,{}),function(){if(!n&&!i&&c&&0!==c.length)return Object(r.jsx)(ve,{})}(),Object(r.jsx)(E.a,{open:F,onClose:P,message:"A new version was released",action:Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(k.a,{color:"secondary",size:"small",onClick:function(e,t){G&&G.postMessage({type:"SKIP_WAITING"}),N(!1),window.location.reload()},children:"REFRESH"}),Object(r.jsx)(w.a,{size:"small","aria-label":"close",color:"inherit",onClick:P,children:Object(r.jsx)(l.a,{fontSize:"small"})})]})})]})})})),ye=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,848)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},we=n(59),xe=n(27),me={loading:!1,hasErrors:!1,currencies:[],selectedCurrencies:[],tableData:[]};var Ee="GET CurrencyS",ke="GET_Currency_SUCCESS",Ce="GET_Currency_FAILURE";var Se={loading:!1,hasErrors:!1,currency:{}};var Te={view:ue};var Ie=Object(we.combineReducers)({currency:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return Object(xe.a)(Object(xe.a)({},e),{},{loading:!0});case ke:return Object(xe.a)(Object(xe.a)({},e),{},{currency:t.payload,loading:!1,hasErrors:!1});case Ce:return Object(xe.a)(Object(xe.a)({},e),{},{loading:!1,hasErrors:!0});default:return e}},currencies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(xe.a)(Object(xe.a)({},e),{},{loading:!0});case $:return Object(xe.a)(Object(xe.a)({},e),{},{currencies:t.payload,loading:!1,hasErrors:!1});case q:return Object(xe.a)(Object(xe.a)({},e),{},{loading:!1,hasErrors:!0});case Q:case X:case Z:return Object(xe.a)(Object(xe.a)({},e),{},{selectedCurrencies:t.payload});case ee:return Object(xe.a)(Object(xe.a)({},e),{},{tableData:t.payload});default:return e}},views:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIEW":return Object(xe.a)(Object(xe.a)({},e),{},{view:t.view});default:return e}}}),Re=n(351),Ne=n(352),De=Object(we.createStore)(Ie,Object(Ne.composeWithDevTools)(Object(we.applyMiddleware)(Re.a)));s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(G.a,{store:De,children:Object(r.jsx)(ge,{})})}),document.getElementById("root")),D(),ye()}},[[432,1,3]]]);
//# sourceMappingURL=main.97b7a10a.chunk.js.map