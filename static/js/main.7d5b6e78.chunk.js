(this["webpackJsonpcurrency-converter-pwa"]=this["webpackJsonpcurrency-converter-pwa"]||[]).push([[0],{369:function(e,t,n){},434:function(e,t,n){"use strict";n.r(t);var r=n(15),a=n(0),c=n.n(a),i=n(16),s=n.n(i),o=(n(369),n(110)),u=n(203),l=n.n(u),f=n(353),d=n.n(f),p=n(117),b=n(307),h=n(308),j=n(115);function v(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"dark":"light",n=e?p.a[900]:b.a[900],r=e?"#616161":h.a[500];return Object(j.a)({palette:{type:t,primary:{main:n},secondary:{main:r}}})}var O=n(328),g=n(471),y=n(309),w=n(462),x=n(472),m=n(96),E=n(315),k=n(469),C=n(468),S=n(246),T=n(21),I=n.n(T),R=n(39),N=n(91),D=n.n(N),_=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e){if("serviceWorker"in navigator){if(new URL("/currency-converter-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/currency-converter-pwa","/service-worker.js");_?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):G(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):G(t,e)}))}}function G(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var U=n(356),L=n(58),W=n(458),F=n(310),M=Object(y.a)((function(e){return{root:{flexGrow:1},currencyText:{display:"flex",flexDirection:"column",justifyContent:"center"},currencyInput:{width:"100%"}}}));var P=function(e){var t=e.currency,n=e.change,a=M();return Object(r.jsxs)(W.a,{container:!0,spacing:3,children:[Object(r.jsx)(W.a,{className:a.currencyText,item:!0,sm:3,children:Object(r.jsxs)(m.a,{variant:"body1",children:[t.name," (",t.id,")"]})}),Object(r.jsx)(W.a,{item:!0,sm:9,children:Object(r.jsx)(F.a,{id:"outlined-number",className:a.currencyInput,label:"Number",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:t.rates,onChange:function(e){n(t.id,e.target.value)}})})]})},B=n(109),z=n(349),H=n(350),J=n(460),V=n.n(J),K=[{id:"EUR",name:"Euro",rates:"1.00"},{id:"GBP",name:"British Pound Sterling",rates:"0.1"},{id:"USD",name:"United States Dollar",rates:"1.17"}],Y=new(function(){function e(){Object(z.a)(this,e)}return Object(H.a)(e,[{key:"updateRates",value:function(){var e=Object(R.a)(I.a.mark((function e(){var t,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,n=null,e.prev=2,e.next=5,this.getAllRates();case 5:return t=e.sent,e.next=8,this.getCurrencyList();case 8:n=(n=e.sent).symbols,e.next=18;break;case 12:return e.prev=12,e.t0=e.catch(2),console.log(e.t0),e.next=17,this.getOfflineData();case 17:return e.abrupt("return",e.sent);case 18:return e.next=20,this.populate(n,t);case 20:return r=e.sent,e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrencyList",value:function(){var e=Object(R.a)(I.a.mark((function e(){var t,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("//jiasheng.tech/api","/currencylist/"),e.next=3,fetch(t);case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllRates",value:function(){var e=Object(R.a)(I.a.mark((function e(){var t,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("//jiasheng.tech/api","/rates/"),e.next=3,fetch(t);case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOfflineData",value:function(){var e=Object(R.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.getItem("data");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSelectedCurrencies",value:function(){var e=Object(R.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,D.a.getItem("selectedCurrencies");case 3:if(r=e.sent){e.next=8;break}return e.next=7,D.a.setItem("selectedCurrencies",K);case 7:r=e.sent;case 8:if(!t){e.next=11;break}return Object.entries(t).forEach((function(e){var t,a=Object(B.a)(r);try{for(a.s();!(t=a.n()).done;){var c=t.value;e[1].id===c.id&&n.push(e[1])}}catch(i){a.e(i)}finally{a.f()}})),e.abrupt("return",n);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSelectedCurrencies",value:function(){var e=Object(R.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.setItem("selectedCurrencies",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"populate",value:function(){var e=Object(R.a)(I.a.mark((function e(t,n){var r,a,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in r=[],t)(c={}).id=a,c.name=t[a],c.rates=n.rates[a].toFixed(2)||0,r.push(c);return e.next=4,D.a.setItem("data",r);case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDate",value:function(e){var t=new Date(1e3*e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(("0"+t.getMinutes()).slice(-2))}},{key:"change",value:function(e,t,n,r){var a,c={},i=Object(B.a)(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;c[s.id]=Number(s.rates)}}catch(p){i.e(p)}finally{i.f()}var o,u=[],l=Object(B.a)(t);try{for(l.s();!(o=l.n()).done;){var f=o.value,d={};d.name=f.name,d.id=f.id;try{d.rates=V()(Number(r),{from:n,to:f.id,base:"EUR",rates:c}),d.id===n?d.rates=r:d.rates=d.rates.toFixed(2)}catch(b){console.log(b)}u.push(d)}}catch(p){l.e(p)}finally{l.f()}return u}}]),e}());Object.freeze(Y);var $=Y,q="GET_CURRENCIES",Q="GET_CURRENCIES_SUCCESS",X="GET_CURRENCIES_FAILURE",Z="GET_SELECTED_CURRENCIES",ee="SET_SELECTED_CURRENCIES",te="CHANGE_RATE",ne="GET_TABLE_DATA",re=function(e){return{type:Q,payload:e}};var ae=Object(y.a)((function(e){return{root:{flexGrow:1,margin:24}}}));var ce=Object(L.b)((function(e){return{selected:e.currencies.selectedCurrencies,rates:e.currencies.currencies}}))((function(e){var t=e.dispatch,n=e.selected,c=e.rates,i=ae();Object(a.useEffect)((function(){t(function(e){return function(){var t=Object(R.a)(I.a.mark((function t(n){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.getSelectedCurrencies(e);case 2:r=t.sent,n({type:Z,payload:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(c))}),[t,c]);var s=function(e,r){if(!isNaN(r)){var a=Object(U.a)(n);t(function(e,t,n,r){return function(){var a=Object(R.a)(I.a.mark((function a(c){var i;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=$.change(e,t,n,r),c({type:te,payload:i});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(c,a,e,r))}};return Object(r.jsx)("div",{className:i.root,children:function(){if("object"===typeof n&&0!==n.length)return n.map((function(e){return Object(r.jsx)(P,{currency:e,change:s},e.id)}))}()})})),ie=n(245),se=n.n(ie),oe=Object(y.a)((function(e){return{root:{flexGrow:1,margin:24,maxWidth:"100%"}}}));var ue=Object(L.b)((function(e){return{tableData:e.currencies.tableData,rates:e.currencies.currencies}}))((function(e){var t=e.dispatch,n=e.tableData,c=e.rates,i=oe();return Object(a.useEffect)((function(){t(function(e){return function(){var t=Object(R.a)(I.a.mark((function t(n){var r,a,c,i,s,o,u;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.getSelectedCurrencies(e);case 2:r=t.sent,a=Object(B.a)(e);try{for(a.s();!(c=a.n()).done;){i=c.value,s=Object(B.a)(r);try{for(s.s();!(o=s.n()).done;)u=o.value,i.id===u.id&&(i.tableData={checked:!0})}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}n({type:ne,payload:e});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(c))}),[t,c]),Object(r.jsx)("div",{className:i.root,children:Object(r.jsx)(se.a,{columns:[{title:"Name",field:"name"},{title:"ID",field:"id"},{title:"Rate",field:"rates",type:"numeric"}],data:n,title:"",options:{sorting:!0,selection:!0,pageSize:20},onSelectionChange:function(e){return t((n=e,function(){var e=Object(R.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.setSelectedCurrencies(n);case 2:t({type:ee,payload:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n}})})})),le=function(e){return{type:"SET_VIEW",view:e}},fe="HOME",de="ALL",pe="STATS",be=n(470),he=n(352),je=n.n(he),ve=n(209),Oe=n(31),ge=Object(y.a)((function(e){return{root:{flexGrow:1},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}));var ye=Object(L.b)((function(e){return{view:e.views.view}}))((function(e){var t=e.dispatch,n=e.view,a=ge();return Object(r.jsxs)(ve.a,{children:[Object(r.jsxs)(Oe.d,{children:[Object(r.jsx)(Oe.b,{path:"/all",render:function(){return t(le(de)),Object(r.jsx)(ue,{})}}),Object(r.jsx)(Oe.b,{path:"/",render:function(){return t(le(fe)),Object(r.jsx)(ce,{})}}),Object(r.jsx)(Oe.a,{to:"/"})]}),function(e){switch(e){case fe:return Object(r.jsx)(be.a,{component:ve.b,to:"/all",color:"primary",className:a.fab,children:Object(r.jsx)(je.a,{})});case de:return Object(r.jsx)(be.a,{component:ve.b,to:"/",color:"primary",className:a.fab,children:Object(r.jsx)(l.a,{})});case pe:default:return null}}(n)]})})),we=Object(y.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},fab:{position:"relative",bottom:e.spacing(2),right:e.spacing(2)}}}));var xe=Object(L.b)((function(e){return{loading:e.currencies.loading,rates:e.currencies.currencies,hasErrors:e.currencies.hasErrors,view:e.views.view}}))((function(e){var t=e.dispatch,n=e.loading,c=e.rates,i=e.hasErrors,s=(e.view,we()),u=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){return(e=Object(R.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.getItem("darkMode");case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),[n,function(){D.a.setItem("darkMode",!n),r(!n)}]}(),f=Object(o.a)(u,2),p=f[0],b=f[1],h=Object(a.useState)(!1),j=Object(o.a)(h,2),y=j[0],T=j[1],N=Object(a.useState)({}),_=Object(o.a)(N,2),G=_[0],U=_[1],L=Object(a.useState)(!1),W=Object(o.a)(L,2),F=W[0],M=W[1],P=function(e,t){"clickaway"!==t&&M(!1)};Object(a.useEffect)((function(){t(function(){var e=Object(R.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:q}),e.prev=1,e.next=4,$.getOfflineData();case 4:return n=e.sent,t(re(n)),e.next=8,$.updateRates();case 8:r=e.sent,t(re(r)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t({type:X});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()),A({onUpdate:B}),y&&M(!0)}),[t,y]);var B=function(e){T(!0),U(e&&e.waiting)};return Object(r.jsx)(w.a,{theme:v(p),children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(C.a,{position:"static",children:Object(r.jsxs)(E.a,{children:[Object(r.jsx)(m.a,{variant:"h6",className:s.title,children:"Currency Conveter"}),Object(r.jsx)(S.a,{color:"inherit","aria-label":"statistics",children:Object(r.jsx)(d.a,{})}),Object(r.jsx)(x.a,{checked:p||!1,onChange:b})]})}),Object(r.jsx)(k.a,{}),function(){if(!n&&!i&&c&&0!==c.length)return Object(r.jsx)(ye,{})}(),Object(r.jsx)(g.a,{open:F,onClose:P,message:"A new version was released",action:Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(O.a,{color:"secondary",size:"small",onClick:function(e,t){G&&G.postMessage({type:"SKIP_WAITING"}),T(!1),window.location.reload()},children:"REFRESH"}),Object(r.jsx)(S.a,{size:"small","aria-label":"close",color:"inherit",onClick:P,children:Object(r.jsx)(l.a,{fontSize:"small"})})]})})]})})})),me=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,847)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},Ee=n(59),ke=n(27),Ce={loading:!1,hasErrors:!1,currencies:[],selectedCurrencies:[],tableData:[]};var Se="GET CurrencyS",Te="GET_Currency_SUCCESS",Ie="GET_Currency_FAILURE";var Re={loading:!1,hasErrors:!1,currency:{}};var Ne={view:fe};var De=Object(Ee.combineReducers)({currency:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se:return Object(ke.a)(Object(ke.a)({},e),{},{loading:!0});case Te:return Object(ke.a)(Object(ke.a)({},e),{},{currency:t.payload,loading:!1,hasErrors:!1});case Ie:return Object(ke.a)(Object(ke.a)({},e),{},{loading:!1,hasErrors:!0});default:return e}},currencies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(ke.a)(Object(ke.a)({},e),{},{loading:!0});case Q:return Object(ke.a)(Object(ke.a)({},e),{},{currencies:t.payload,loading:!1,hasErrors:!1});case X:return Object(ke.a)(Object(ke.a)({},e),{},{loading:!1,hasErrors:!0});case Z:case ee:case te:return Object(ke.a)(Object(ke.a)({},e),{},{selectedCurrencies:t.payload});case ne:return Object(ke.a)(Object(ke.a)({},e),{},{tableData:t.payload});default:return e}},views:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIEW":return Object(ke.a)(Object(ke.a)({},e),{},{view:t.view});default:return e}}}),_e=n(354),Ae=n(355),Ge=Object(Ee.createStore)(De,Object(Ae.composeWithDevTools)(Object(Ee.applyMiddleware)(_e.a)));s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(L.a,{store:Ge,children:Object(r.jsx)(xe,{})})}),document.getElementById("root")),A(),me()}},[[434,1,3]]]);
//# sourceMappingURL=main.7d5b6e78.chunk.js.map